<template>
  <!--================ Start Home Banner Area =================-->
  <section class="home_banner_area content_section" id="home">
    <div class="banner_inner">
      <div class="container">
        <div class="row">
          <div class="col-lg-7">
            <div class="banner_content">
              <h3 class="text-uppercase">Hell0</h3>
              <h1 class="text-uppercase">I am Anwar H.</h1>
              <h5 class="text-uppercase">senior fullstack developer</h5>
              <div class="d-flex align-items-center">
                <a class="primary_btn" href="#contact" @click.prevent="scrollFix('#contact')"><span>Hire Me</span></a>
                <a class="primary_btn tr-bg" target="_blank"
                   href="https://docs.google.com/viewer?url=https://docs.google.com/document/d/1ueGrVOsMhkGbKpjtwcPd4gKeCJlallAjFwQq_lM7le4/export?format=pdf"><span>Get CV</span></a>
              </div>
            </div>
          </div>
          <div class="col-lg-5">
            <div class="home_right_img">
              <img class="" src="../assets/img/banner/home-right.png" alt="">
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!--================ End Home Banner Area =================-->

  <!--================ Start About Us Area =================-->
  <section class="about_area section_gap content_section" style="padding-bottom: 0px; padding-top: 120px" id="about">
    <div class="container">
      <div class="row justify-content-start align-items-center">
        <div class="col-lg-5">
          <div class="about_img">
            <img class="" src="../assets/img/about-us.png" alt="">
          </div>
        </div>

        <div class="offset-lg-1 col-lg-5">
          <div class="main_title text-left">
            <h2>letâ€™s <br>
              Introduce about <br>
              myself</h2>
            <p>
              I have been working in programming & development for over 6 years. I have worked as a senior application
              developer at <a href="https://programming-hero.com" target="_blank">Programming Hero</a>. Also worked at
              <a href="https://webnestbd.com" target="_blank">WebNest Solutions</a> as a Fullstack Developer.
            </p>
            <p>
              I like electronics & embedded programming. I spent my leisure time doing IoT, Arduino, circuit design &
              analysis.
            </p>
            <a class="primary_btn"
               href="https://docs.google.com/document/d/1ueGrVOsMhkGbKpjtwcPd4gKeCJlallAjFwQq_lM7le4/export?format=pdf"><span>Download CV</span></a>
          </div>
        </div>
      </div>
    </div>
    <div class="container section_gap" style="padding-bottom: 0">
      <div class="row justify-content-center">
        <div class="col-lg-6">
          <div class="row">
            <div class="col-lg-4 col-md-4 col-sm-6">
              <div class="single-brand-item d-table">
                <div class="d-table-cell text-center">
                  <img src="../assets/img/brands/java.svg" alt="">
                </div>
              </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-6">
              <div class="single-brand-item d-table">
                <div class="d-table-cell text-center">
                  <img src="../assets/img/brands/php-1.svg" alt="">
                </div>
              </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-6">
              <div class="single-brand-item d-table">
                <div class="d-table-cell text-center">
                  <img src="../assets/img/brands/laravel-2.svg" alt="">
                </div>
              </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-6">
              <div class="single-brand-item d-table">
                <div class="d-table-cell text-center">
                  <img src="../assets/img/brands/vue-9.svg" alt="">
                </div>
              </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-6">
              <div class="single-brand-item d-table">
                <div class="d-table-cell text-center">
                  <img src="../assets/img/brands/android-4.svg" alt="Android">
                </div>
              </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-6">
              <div class="single-brand-item d-table">
                <div class="d-table-cell text-center">
                  <img src="../assets/img/brands/python-5.svg" alt="Python">
                </div>
              </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-6">
              <div class="single-brand-item d-table">
                <div class="d-table-cell text-center">
                  <img src="../assets/img/brands/wordpress-blue.svg" alt="Wordpress">
                </div>
              </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-6">
              <div class="single-brand-item d-table">
                <div class="d-table-cell text-center">
                  <img src="../assets/img/brands/nodejs-1.svg" alt="Arduino">
                </div>
              </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-6">
              <div class="single-brand-item d-table">
                <div class="d-table-cell text-center">
                  <img src="../assets/img/brands/arduino.svg" alt="Arduino">
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="offset-lg-2 col-lg-4 col-md-6">
          <div class="client-info">
            <div class="d-flex mb-50">
              <span class="lage">6</span>
              <span class="smll">Years Working Experience</span>
            </div>
            <div class="call-now d-flex">
              <div>
                <span class="fa fa-phone"></span>
              </div>
              <div class="ml-15">
                <p>call me now</p>
                <h3><a href="tel:+8801776025366">+8801776025366</a></h3>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!--================ End About Us Area =================-->

  <!--================ Start Features Area =================-->
  <section class="features_area content_section section_gap" style="padding-top: 120px; padding-bottom: 0"
           id="services">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-8 text-center">
          <div class="main_title">
            <h2>service offers </h2>
            <p>
              I will design & develop any type of mobile and web application for your company. Also, I can add a new
              features and fix bugs to your existing projects.
            </p>
          </div>
        </div>
      </div>
      <div class="row feature_inner">
        <div class="col-lg-3 col-md-6">
          <div class="feature_item">
            <img src="../assets/img/services/s1.png" alt="">
            <h4>Application Development</h4>
            <ul class="unordered-list">
              <li>Java</li>
              <li>Kotlin</li>
              <li>Flutter</li>
              <li>Swift</li>
              <li>Kivy</li>
            </ul>
          </div>
        </div>
        <div class="col-lg-3 col-md-6">
          <div class="feature_item">
            <img src="../assets/img/services/s2.png" alt="">
            <h4>Web Development</h4>
            <ul class="unordered-list">
              <li>PHP</li>
              <li>Laravel</li>
              <li>Vue</li>
              <li>Node</li>
              <li>Wordpress</li>
              <li>Django</li>
            </ul>
          </div>
        </div>
        <div class="col-lg-3 col-md-6">
          <div class="feature_item">
            <img src="../assets/img/services/s3.png" alt="">
            <h4>Web design</h4>
            <ul class="unordered-list">
              <li>HTML5</li>
              <li>CSS3</li>
              <li>Bootstrap</li>
              <li>Material Design</li>
              <li>Vue JS</li>
              <li>React</li>
            </ul>
            <p></p>
          </div>
        </div>
        <div class="col-lg-3 col-md-6">
          <div class="feature_item">
            <img src="../assets/img/services/s4.png" alt="">
            <h4>Database Administration</h4>
            <ul class="unordered-list">
              <li>MySql</li>
              <li>Postgres</li>
              <li>Mongodb</li>
              <li>DB Design</li>
              <li>DB Backup</li>
              <li>DB Replication</li>
            </ul>
            <p></p>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!--================ End Features Area =================-->

  <!--================Start Portfolio Area =================-->
  <section class="portfolio_area content_section section_gap" style="padding-bottom: 0; padding-top: 120px"
           id="portfolio">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <div class="main_title text-left">
            <h2>quality work <br>
              Recently done project </h2>
          </div>
        </div>
      </div>
      <div class="filters portfolio-filter">
        <ul>
          <li class="active refresh" data-filter="*" :key="'filter_all'">all</li>
          <li :data-filter="'.'+keyword" v-for="keyword in keywords" :key="'filter_'+keyword">{{ keyword }}</li>
        </ul>
      </div>

      <div class="filters-content">
        <div class="row portfolio-grid justify-content-center">
          <div class="col-lg-4 col-md-6 all" :class="keywordsToStr(project.keywords)"
               v-for="(project,index) in projects" :key="index">
            <div class="portfolio_box">
              <div class="single_portfolio">
                <img class="img-fluid w-100" :src="project.thumbs" alt="">
                <div class="overlay"></div>
                <a href="" class="img-gal" @click.prevent="showProject(project)">
                  <div class="icon">
                    <span class="lnr lnr-cross"></span>
                  </div>
                </a>
              </div>
              <div class="short_info">
                <h4><a href="#" @click.prevent="showProject(project)">{{ project.name }}</a></h4>
                <p>{{ project.title }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <modal v-if="showPortfolio" @close="hideProject">
        <template v-slot:header>
          <h3>
            {{ project.name }}
          </h3>
          <small>{{ project.title }}</small>
        </template>
        <template v-slot:body>
          <div class="portfolio_details_inner">
            <div class="row">
              <div class="col-lg-12">
                <!--slider-->
              </div>
              <div class="col-lg-5">
                <div class="left_img">
                  <img class="img-fluid" :src="project.thumbs" :alt="project.name">
                </div>
              </div>
              <div class="col-lg-7">
                <div class="portfolio_right_text">
                  <h4 class="text-uppercase">{{ project.name }}</h4>
                  <small>{{ project.title }}</small>
                  <ul class="list" id="keywords">
                    <li v-for="keyword in project.techs" :key="keyword">{{ keyword }}</li>
                  </ul>
                  <ul class="unordered-list">
                    <li v-for="(link,key,index) in project.links" :key="index">
                      {{ key.toUpperCase() }} : <a :href="link" target="_blank">{{ link }}</a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
            <div v-html="project.description"></div>
          </div>
        </template>
      </modal>

    </div>
  </section>
  <!--================End Portfolio Area =================-->

  <!--================ Start Testimonial Area =================-->
  <!-- <div class="testimonial_area section_gap_bottom content_section" id="testomonial">
     <div class="container">
       <div class="row justify-content-center">
         <div class="col-lg-8 text-center">
           <div class="main_title">
             <h2>client say about me</h2>
             <p>Is give may shall likeness made yielding spirit a itself togeth created after sea is in beast <br>
               beginning signs open god you're gathering ithe</p>
           </div>
         </div>
       </div>
       <div class="row">
         <div class="testi_slider owl-carousel">
           <div class="testi_item">
             <div class="row">
               <div class="col-lg-4">
                 <img src="./assets/img/testimonials/t1.jpg" alt="">
               </div>
               <div class="col-lg-8">
                 <div class="testi_text">
                   <h4>Elite Martin</h4>
                   <p>Him, made can't called over won't there on divide there male fish beast own his day third seed
                     sixth seas unto. Saw from </p>
                 </div>
               </div>
             </div>
           </div>
           <div class="testi_item">
             <div class="row">
               <div class="col-lg-4">
                 <img src="./assets/img/testimonials/t2.jpg" alt="">
               </div>
               <div class="col-lg-8">
                 <div class="testi_text">
                   <h4>Davil Saden</h4>
                   <p>Him, made can't called over won't there on divide there male fish beast own his day third seed
                     sixth seas unto. Saw from </p>
                 </div>
               </div>
             </div>
           </div>
           <div class="testi_item">
             <div class="row">
               <div class="col-lg-4">
                 <img src="./assets/img/testimonials/t1.jpg" alt="">
               </div>
               <div class="col-lg-8">
                 <div class="testi_text">
                   <h4>Elite Martin</h4>
                   <p>Him, made can't called over won't there on divide there male fish beast own his day third seed
                     sixth seas unto. Saw from </p>
                 </div>
               </div>
             </div>
           </div>
           <div class="testi_item">
             <div class="row">
               <div class="col-lg-4">
                 <img src="./assets/img/testimonials/t2.jpg" alt="">
               </div>
               <div class="col-lg-8">
                 <div class="testi_text">
                   <h4>Davil Saden</h4>
                   <p>Him, made can't called over won't there on divide there male fish beast own his day third seed
                     sixth seas unto. Saw from </p>
                 </div>
               </div>
             </div>
           </div>
           <div class="testi_item">
             <div class="row">
               <div class="col-lg-4">
                 <img src="./assets/img/testimonials/t1.jpg" alt="">
               </div>
               <div class="col-lg-8">
                 <div class="testi_text">
                   <h4>Elite Martin</h4>
                   <p>Him, made can't called over won't there on divide there male fish beast own his day third seed
                     sixth seas unto. Saw from </p>
                 </div>
               </div>
             </div>
           </div>
           <div class="testi_item">
             <div class="row">
               <div class="col-lg-4">
                 <img src="./assets/img/testimonials/t2.jpg" alt="">
               </div>
               <div class="col-lg-8">
                 <div class="testi_text">
                   <h4>Davil Saden</h4>
                   <p>Him, made can't called over won't there on divide there male fish beast own his day third seed
                     sixth seas unto. Saw from </p>
                 </div>
               </div>
             </div>
           </div>
         </div>
       </div>
     </div>
   </div>-->
  <!--================ End Testimonial Area =================-->

  <!--================ Start Newsletter Area =================-->
  <section class="newsletter_area content_section" id="contact">
    <div class="container">

      <!-- Modal -->
      <div class="modal fade" id="messageDialog" tabindex="-1" role="dialog" aria-labelledby="messageDialog"
           aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content" style="padding-bottom: 20px">
            <div class="modal-header">
              <h6 class="modal-title" id="exampleModalLongTitle">Message Sending</h6>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div style="margin: 25px 25px; color: green; text-align: center">
              <p v-if="loading"><i class="fa fa-spinner fa-spin fa-3x"></i></p>
              <p v-else>Your message have been received. You will be replied very soon. Thank you!</p>
            </div>
            <div class="text-center" v-if="!loading">
              <button type="button" class="btn btn-info" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>

      <div class="row justify-content-center align-items-center">
        <div class="col-lg-12">
          <div class="subscription_box text-center">
            <h2 class="text-uppercase text-white">Have any query ?</h2>
            <p class="text-white">
              Don't hesitate to contact me. I'm always be happy to answer your query.
            </p>
            <div class="subcribe-form" id="mc_embed_signup">
              <form target="_blank" method="get" class="subscription relative" @submit.prevent="storeMessage">
                <input name="EMAIL" placeholder="Enter email" v-model="message.email" type="email"><br>
                <input name="name" placeholder="Your Name" v-model="message.name" type="text"><br>

                <textarea name="message" placeholder="Your message"
                          v-model="message.message"></textarea><br>

                <button class="primary-btn hover d-inline">Send</button>
                <div class="info"></div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!--================ End Newsletter Area =================-->
</template>

<script>
/* eslint-disable no-undef */

import {messageCollection, projectCollection, firebase} from "@/firebase";
import Modal from "@/components/Modal";

export default {
  name: 'Home',
  components: {
    Modal
  },
  data() {
    return {
      projects: [],
      message: {
        'email': '',
        'name': '',
        'message': ''
      },
      loading: false,
      showPortfolio: false,
      project: {}
    }
  },
  methods: {
    scrollFix: function (hash) {
      setTimeout(() => $('html, body').animate({
        // eslint-disable-next-line no-undef
        scrollTop: $(hash).offset().top
      }, 1000), 1)
    },
    async fetchProjects() {
      const snapshot = await projectCollection.get()
      await snapshot.docs.map(doc => {
        this.projects.push(doc.data())
        console.log(doc.data())
      });

      var $workGrid = $('.portfolio-grid').isotope({
        itemSelector: '.all',
        percentPosition: true,
        masonry: {
          columnWidth: '.all'
        }
      });

      $('.portfolio-filter ul li').on('click', function () {

        console.log("clicked");

        // eslint-disable-next-line no-undef
        $('.portfolio-filter ul li').removeClass('active');
        // eslint-disable-next-line no-undef
        $(this).addClass('active');

        var data = $(this).attr('data-filter');
        $workGrid.isotope({
          filter: data
        });
      });

      setTimeout(function () {
        // eslint-disable-next-line no-undef
        $('.refresh').trigger("click");
      }, 2000)

    },
    storeMessage() {

      if (!this.message.name || !this.message.email || !this.message) {
        return;
      }

      // eslint-disable-next-line no-undef
      $('#messageDialog').modal({
        backdrop: 'static'
      })

      this.loading = true
      var _this = this
      this.message.created = firebase.firestore.FieldValue.serverTimestamp()
      messageCollection.add(this.message)
          .then(docRef => {
            _this.loading = false
            _this.message = {}
            console.log(docRef.id)
          })
          .catch(err => {
            console.log(err)
            _this.loading = false
          });
    },
    keywordsToStr(item) {
      return _.map(item, function (i) {
        return ' ' + i.toLowerCase();
      });
    },
    showProject(project) {
      this.showPortfolio = true
      this.project = project
      document.body.classList.add("modal-open");
    },
    hideProject() {
      document.body.classList.remove("modal-open");
      this.showPortfolio = false
      this.project = {}
    }
  },
  computed: {
    keywords: function () {
      // eslint-disable-next-line no-undef

      let keywords = _.flatMap(_.map(this.projects, 'keywords'))
          .join('|')
          .toLowerCase()
          .split('|')
      return _.uniq(keywords);
    }
  },
  created() {
    this.fetchProjects()
  },
  mounted() {
    window.document.onscroll = () => {
      let nav_offset_top = $('header').height() + 50;

      // eslint-disable-next-line no-undef
      var scroll = $(window).scrollTop();
      if (scroll >= nav_offset_top) {
        // eslint-disable-next-line no-undef
        $('.header_area').addClass('navbar_fixed');
      } else {
        // eslint-disable-next-line no-undef
        $('.header_area').removeClass('navbar_fixed');
      }


      //nav match
      // eslint-disable-next-line no-undef
      $('.content_section').each(function () {
        var sectionName = $(this).attr("id");
        var navMatch = $('.nav-item a[id="sc' + sectionName + '"]')

        // console.log(sectionName);
        // console.log(navMatch);

        // eslint-disable-next-line no-undef
        if ($(this).offset().top - $(window).height() / 2 < $(window).scrollTop() &&
            $(this).offset().top + $(this).height() - $(window).height() / 2 > $(window).scrollTop()) {
          navMatch.parent().addClass("active")
        } else {
          navMatch.parent().removeClass("active")
        }

      })

    }

    /*    if ($('.testi_slider').length) {
          $('.testi_slider').owlCarousel({
            loop: true,
            margin: 30,
            items: 2,
            autoplay: true,
            smartSpeed: 2500,
            dots: true,
            responsiveClass: true,
            responsive: {
              0: {
                items: 1
              },
              991: {
                items: 2
              }
            }
          });
        }*/

    $('.nav-link').on('click', function (event) {
      event.preventDefault();

      $('#navbarSupportedContent').removeClass('show');
      $('.navbar-toggler')
          .attr('aria-expanded', 'false')
          .addClass('collapsed');
    });

  }
}
</script>

<style scoped>
#keywords {
  margin-bottom: 10px;
}

#keywords li {
  display: inline-block;
  padding: 5px 10px !important;
  border-radius: 20px;
  background: var(--teal);
  color: white;
  margin-right: 5px;
  font-size: 14px;
}
</style>

